<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Email Import</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Bluth Company">
    <link rel="shortcut icon" href="assets/ico/favicon.html">
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/theme.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/alertify.css" rel="stylesheet">
    <link rel="Favicon Icon" href="favicon.ico">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="assets/css/colorpicker.css" rel="stylesheet">
    <link href="assets/css/datepicker.css" rel="stylesheet">
    <link href="assets/css/timepicker.css" rel="stylesheet">
    <link href="assets/css/select2.css" rel="stylesheet">
</head>
<body>
<div id="wrap">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <div class="logo">
                    <img src="assets/img/logo.png" alt="Realm Admin Template">
                </div>
                <a class="btn btn-navbar visible-phone" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="btn btn-navbar slide_menu_left visible-tablet">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <div class="top-menu visible-desktop">
                    <ul class="pull-left">
                        <li><a id="messages" data-notification="0" href="#"><i class="icon-envelope"></i> Messages</a>
                        </li>
                        <li><a id="notifications" data-notification="0" href="#"><i class="icon-globe"></i>
                            Notifications</a></li>
                    </ul>
                    <ul class="pull-right">
                        <li><a href="login.html"><i class="icon-off"></i> Logout</a></li>
                    </ul>
                </div>

                <div class="top-menu visible-phone visible-tablet">
                    <ul class="pull-right">
                        <li><a title="link to View all Messages page, no popover in phone view or tablet" href="#"><i
                                class="icon-envelope"></i></a></li>
                        <li><a title="link to View all Notifications page, no popover in phone view or tablet" href="#"><i
                                class="icon-globe"></i></a></li>
                        <li><a href="login.html"><i class="icon-off"></i></a></li>
                    </ul>
                </div>

            </div>
        </div>
    </div>
    <div class="container-fluid">

        <!-- Side menu -->
        <div class="sidebar-nav nav-collapse collapse">
            <div class="user_side clearfix">
                <img src="assets/img/odinn.jpg" alt="Odinn god of Thunder">
                <h5>Odinn</h5>
                <a href="#"><i class="icon-cog"></i> Settings</a>
            </div>
            <div class="accordion" id="accordion2">
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle active b_F79999" href="/index"><i class="icon-dashboard"></i> <span>Dashboard</span></a>
                    </div>
                </div>

                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle active b_F79999" href="/emailexport"><i class="icon-table"></i>
                            <span>Import Send Email</span></a>
                    </div>
                </div>


                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle active b_F79999" href="/sendsource"><i class="icon-list-alt"></i>
                            <span>Sendsource Config</span></a>
                    </div>
                </div>


                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle active b_F79999" href="/batch"><i class="icon-tasks"></i> <span>Batch Config</span></a>
                    </div>
                </div>

                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle active b_F79999" href="/emailfiltrate"><i class="icon-tasks"></i>
                            <span>Import Filtrate Email</span></a>
                    </div>
                </div>

                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle active b_F79999" href="/emailsendkey"><i class="icon-tasks"></i>
                            <span>SendKey Config</span></a>
                    </div>
                </div>

                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle active b_F79999" href="/emailautocruise"><i class="icon-tasks"></i>
                            <span>Send Auto Config</span></a>
                    </div>
                </div>


            </div>
        </div>
        <!-- /Side menu -->

        <!-- Main window -->
        <div class="main_container" id="forms_page">
            <div class="row-fluid">
                <ul class="breadcrumb">
                    <li><a href="#">Home</a> <span class="divider">/</span></li>
                    <li><a href="#">Features</a> <span class="divider">/</span></li>
                    <li class="active">email autocruise config</li>
                </ul>
                <h2 class="heading">
                    邮件自动发送配置
                </h2>
            </div>
            <div class="row-fluid">
                <div class="widget widget-padding span12">
                    <div class="widget-header">
                        <i class="icon-list-alt"></i><h5>邮件自动发送配置</h5>
                        <div class="widget-buttons">
                            <a href="#" data-title="Collapse" data-collapsed="false" class="tip collapse"><i
                                    class="icon-chevron-up"></i></a>
                        </div>
                    </div>
                    <div class="widget-body">
                        <div class="widget-forms clearfix">
                            <form class="form-horizontal" action="/autocruise" id="emailForm"
                                  method="post">

                                <div class="control-group" style="display:none">
                                    <label class="control-label">渠道描述</label>
                                    <div class="controls">
                                        <input class="span2" type="text" id="sendsource" name="sendsource" value="01">
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-group">
                                        <label class="control-label">是否开启</label>
                                        <div class="controls">
                                            <label class="radio">
                                                <input type="radio" name="isopen" id="option1" value="1" checked>
                                                是
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="isopen" id="option2" value="0">
                                                否
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-group">
                                        <label class="control-label">日发送数量</label>
                                        <div class="controls">
                                            <input class="span2" type="text" id="sendcount" name="sendcount"
                                                   placeholder="日自动发送数量">
                                            <span class="help-inline"></span>
                                        </div>
                                    </div>
                                </div>

                                <div  class="controls" style="display:none" id="successlab">
                                    <div class="alert alert-success span5">
                                        <strong>SUCCESS!</strong> You successfully email autocruise.
                                    </div>
                                </div>

                                <div class="controls" style="display: none" id="errorlab">
                                    <div class="alert alert-error span5">
                                        <strong>FAIL!</strong> You fail import email autocruise.
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                    <div class="widget-footer">
                        <button class="btn btn-primary" type="submit" id="emailBatchSubmit">提交</button>
                        <button class="btn" type="button" id="emailBatchCancel">重置</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- /Main window -->

    </div><!--/.fluid-container-->

    <div id="success01" class="alert alert-success modal hide fade " tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <strong>Success!</strong> This batch load Success!
    </div>

    <div id="error02" class="alert alert-error modal hide fade " tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <strong>Fail!</strong> This batch load Fail.
    </div>

</div><!-- wrap ends-->

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="assets/js/ajaxfileupload.js"></script>
<script type="text/javascript" src="assets/js/raphael-min.js"></script>
<script type="text/javascript" src="assets/js/bootstrap.js"></script>
<script type="text/javascript" src='assets/js/sparkline.js'></script>
<script type="text/javascript" src='assets/js/morris.min.js'></script>
<script type="text/javascript" src="assets/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.masonry.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.imagesloaded.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.facybox.js"></script>
<script type="text/javascript" src="assets/js/jquery.alertify.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.knob.js"></script>
<script type='text/javascript' src='assets/js/fullcalendar.min.js'></script>
<script type='text/javascript' src='assets/js/jquery.gritter.min.js'></script>
<script type="text/javascript" src="assets/js/realm.js"></script>
<script type="text/javascript" src="assets/js/select2.min.js"></script>
<script type="text/javascript" src="assets/js/bootstrap-colorpicker.js"></script>
<script type="text/javascript" src="assets/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="assets/js/bootstrap-timepicker.js"></script>

<script th:inline="javascript">
    var result = [[${result}]];
    if(result=="1"){
        $("#success01").modal("show");
    }
    if(result=="0"){
        $("#error02").modal("show");

    }
</script>

<!--文件上传JS-->
<script type="text/javascript">
    $().ready(function () {
        $.ajax({
            type: "POST",//方法类型
            dataType: "json",//预期服务器返回的数据类型
            url: "/getSendConfig",//url
            data: {},
            success: function (result) {
                var isopen = result.emailAutoSendConfigEntity.isopen;
                var sendcount = result.emailAutoSendConfigEntity.sendcount;
                if (isopen == "0") {
                    $("#option2").attr("checked", "0");
                };
                if (isopen == "1") {
                    $("#option1").attr("checked", "1");
                };
                $("#sendcount").val(sendcount);
            },
            error: function () {
                alert("异常！");
            }
        });

    });

    $("#emailBatchSubmit").click(
        function () {
            var sendsource = $("#sendsource").val();
            $.ajax({
                type: "POST",//方法类型
                dataType: "json",//预期服务器返回的数据类型
                url: "/sendautocruise/save",//url
                data: $('#emailForm').serialize(),
                success: function (result) {
                    $("#success01").modal("show");
                    location.reload();
                },
                error: function () {
                    alert("异常！");
                }
            });
        }
    );

    $("#emailBatchCancel").click(
        function () {
            $("#option1").attr("checked", "1");
            $("#sendcount").val("");
        }
    );

</script>
</body>
</html>